{% extends "layout.html" %}
{% block content %}

<script type=text/javascript>
	onload = function() {
		kihon();
		// const input = document.querySelector('input');
		// input.addEventListener('input', updateValue);
	};

	function kihon() {
    var cnvs = document.getElementById('sample');
    var ctx = cnvs.getContext('2d');
    ctx.strokeStyle = 'rgb(255,0,255)';
    ctx.strokeRect( 0, 0, 250,400);
    ctx.strokeRect( 20, 20, 210,120);
    ctx.strokeRect( 20, 160, 80,50);
	ctx.arc(140, 185, 25,0,Math.PI*2);
	ctx.moveTo(225, 185);
	ctx.arc(200, 185, 25,0,Math.PI*2);

	ctx.stroke();
	}

	$(function() {
	  $('a#ac_on').bind('click', function() {
		$.getJSON('/ac_on',
			function(data) {
		});
		var power = document.getElementById('ac_power')
		power.innerText = 1
		return false;
	  });
	  $('a#ac_off').bind('click', function() {
		$.getJSON('/ac_off',
			function(data) {
		  //do nothing
		});
		var power = document.getElementById('ac_power')
		power.innerText = 0
		return false;
	  });
	});

	// function updateValue(e) {
	// 	var set_temp = document.getElementById('set_temperature')
	// 	power.innerText = e.target.value;
	// }

	$(function () {
	graph();
	function graph() {
		$.get("/getRoomInfo/100", function (data) {
			// var jdata = JSON.parse(data);
			var ctx = document.getElementById("myChart");
			var myChart = new Chart(ctx, {
				type: 'line',
				data: data,
				options: {
					scales: {
						yAxes: [
							{id:"y-axis-1",
								typee:"linear",
								position:"left",
								ticks: {
									suggestedMax: 100,
									suggestedMin: 0,
									stepSize: 10
								}
							}
						]
					},
				}
			});
		});
	}
});

	setTimeout(function () {
		location.reload();
	}, 30000);

</script>

<div class="panel panel-head">
	<h1>IoTリモコン</h1>
</div>
<div class="panel panel-body">

	<div class="container"> 
		<div class="row">
			<div class="col-md-6">
				<a href=# id=ac_on><button class='btn btn-default' value="1">エアコンＯＮ</button></a>
				<a href=# id=ac_off><button class='btn btn-default' value="1">エアコンＯＦＦ</button></a>
				<!-- <label>設定温度:
					<input type="number" name="number" min="15" max="32" step="0.1">
				</label> -->
				<table class="table table-bordered table-striped">
					<tr><td class="info">モード</td><td>{{mode}}</td></tr>
					<tr><td class="info">機種</td><td>{{model}}</td></tr>
					<tr><td class="info">電源</td><td id="ac_power"> {{power}}</td></tr>
					<tr><td class="info">設定温度</td><td id = set_temperature>{{set_temp}}</td></tr>
				</table>				
				<canvas id="sample" width="500" height="500"></canvas>
			</div>
			<div class="col-md-6">
				<div class="table-responsive">
					<table class="table table-bordered table-striped">
						<tr><td class="info">不快指数</td><td>{{f}} %</td></tr>
					</table>
				</div>
				<canvas id="myChart"></canvas>
			</div>
		</div>
	</div>
</div>
{% endblock %}